<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MattGPT - Agentic AI Research Platform</title>
    <link rel="stylesheet" href="styles.css"> 
    <style>
        /* Additional styles specific to homepage */
        .hero-section {
            background: var(--gradient-primary);
            color: var(--neutral-0);
            padding: 60px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 4s infinite;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-content h1 {
            font-size: 3em;
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--accent-electric), var(--primary-400), var(--accent-neon));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.025em;
        }

        .hero-content p {
            font-size: 1.3em;
            opacity: 0.9;
            font-weight: 400;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .cta-button {
            background: var(--gradient-accent);
            color: var(--neutral-0);
            border: none;
            padding: 15px 30px;
            border-radius: var(--radius-md);
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-normal);
            text-decoration: none;
            display: inline-block;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(6, 182, 212, 0.4);
        }

        .video-container, .feature-container {
            background: var(--neutral-0);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .video-container h3, .feature-container h3 {
            color: var(--primary-600);
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .video-placeholder {
            background: var(--neutral-800);
            border-radius: var(--radius-md);
            aspect-ratio: 16/9;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--neutral-400);
            font-size: 1.2em;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .video-placeholder::before {
            content: '▶️';
            font-size: 3em;
            opacity: 0.7;
        }

        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-md);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .main-content {
            padding: 0 30px 60px;
            background: var(--neutral-0);
        }

        .podcast-grid, .review-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(50vw, 600px), 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .podcast-item, .review-item {
            background: var(--gradient-surface);
            border-radius: var(--radius-md);
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--accent-electric);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .podcast-item:hover, .review-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .podcast-item::before, .review-item::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(6, 182, 212, 0.05), transparent);
            transition: right 0.5s ease;
        }

        .podcast-item:hover::before, .review-item:hover::before {
            right: 100%;
        }

        .item-title {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary-600);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-meta {
            color: var(--neutral-500);
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .item-description {
            color: var(--neutral-600);
            line-height: 1.5;
            margin-bottom: 15px;
        }

        /* Fixed Podcast Controls Styling */
        .podcast-controls {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .podcast-listen-btn, .podcast-download-btn {
            background: var(--primary-600);
            color: var(--neutral-0);
            border: none;
            padding: 10px 18px;
            border-radius: var(--radius-md);
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 100px;
            height: 40px;
            box-sizing: border-box;
        }

        .podcast-listen-btn:hover, .podcast-download-btn:hover {
            background: var(--primary-700);
            transform: translateY(-2px);
        }

        .podcast-listen-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .podcast-download-btn {
            background: var(--accent-neon);
        }

        .podcast-download-btn:hover {
            background: #059669;
        }

        /* Audio Player Styling */
        .podcast-player {
            margin-top: 15px;
            padding: 15px;
            background: var(--neutral-50);
            border-radius: var(--radius-md);
            border: 1px solid var(--neutral-200);
            display: none;
        }

        .podcast-player audio {
            width: 100%;
            height: 40px;
            outline: none;
        }

        .download-button {
            background: var(--primary-600);
            color: var(--neutral-0);
            border: none;
            padding: 8px 16px;
            border-radius: var(--radius-md);
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-decoration: none;
            display: inline-block;
        }

        .download-button:hover {
            background: var(--primary-700);
            transform: translateY(-1px);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--neutral-500);
            font-style: italic;
        }

        .empty-state-icon {
            font-size: 3em;
            margin-bottom: 10px;
            opacity: 0.5;
        }

        .download-instructions {
            background: var(--primary-50);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin: 20px 0;
            border: 2px solid var(--accent-electric);
        }

        .download-instructions h4 {
            color: var(--primary-700);
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .download-instructions ol, .download-instructions ul {
            color: var(--neutral-700);
            line-height: 1.6;
            padding-left: 20px;
        }

        .download-instructions li {
            margin-bottom: 8px;
        }

        .archive-download {
            background: var(--gradient-accent);
            color: var(--neutral-0);
            border: none;
            padding: 15px 25px;
            border-radius: var(--radius-md);
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-normal);
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
        }

        .archive-download:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.3);
        }

        .documentation-section {
            background: var(--primary-50);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin: 20px 0;
            border: 2px solid var(--accent-neon);
        }

        .doc-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .doc-button {
            background: var(--primary-600);
            color: var(--neutral-0);
            border: none;
            padding: 12px 20px;
            border-radius: var(--radius-md);
            font-size: 0.95em;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .doc-button:hover {
            background: var(--primary-700);
            transform: translateY(-2px);
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--neutral-300);
            border-radius: 50%;
            border-top-color: var(--primary-600);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Status Message Styles */
        .status-message {
            padding: 15px;
            border-radius: var(--radius-md);
            margin: 15px 0;
            font-weight: 500;
        }

        .status-success {
            background: #ecfdf5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .status-error {
            background: #fef2f2;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }

        .status-info {
            background: #eff6ff;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }

        /* Week Review Link Styling */
        .review-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--neutral-50);
            border-radius: var(--radius-md);
            text-decoration: none;
            color: inherit;
            transition: all var(--transition-normal);
            border-left: 4px solid var(--accent-electric);
        }

        .review-link:hover {
            background: var(--primary-50);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* Dark mode overrides */
        .dark-mode .video-container, .dark-mode .feature-container {
            background: var(--neutral-800);
        }

        .dark-mode .video-container h3, .dark-mode .feature-container h3 {
            color: var(--accent-electric);
        }

        .dark-mode .main-content {
            background: var(--neutral-900);
        }

        .dark-mode .podcast-item, 
        .dark-mode .review-item {
            background: var(--neutral-800);
            color: var(--neutral-100);
        }

        .dark-mode .item-title {
            color: var(--accent-electric);
        }

        .dark-mode .item-description {
            color: var(--neutral-200);
        }

        .dark-mode .podcast-player {
            background: var(--neutral-800);
            border-color: var(--neutral-600);
        }

        .dark-mode .podcast-listen-btn, .dark-mode .podcast-download-btn {
            background: var(--accent-electric);
        }

        .dark-mode .podcast-listen-btn:hover, .dark-mode .podcast-download-btn:hover {
            background: var(--primary-700);
        }

        .dark-mode .download-instructions {
            background: var(--neutral-800);
            color: var(--neutral-100);
            border-color: var(--accent-electric);
        }

        .dark-mode .download-instructions h4 {
            color: var(--accent-electric);
        }

        .dark-mode .download-instructions ol, .dark-mode .download-instructions ul {
            color: var(--neutral-200);
        }

        .dark-mode .documentation-section {
            background: var(--neutral-800);
            color: var(--neutral-100);
            border-color: var(--accent-neon);
        }

        .dark-mode .status-success {
            background: var(--neutral-800);
            color: var(--accent-neon);
        }

        .dark-mode .status-error {
            background: var(--neutral-800);
            color: var(--accent-error);
        }

        .dark-mode .status-info {
            background: var(--neutral-800);
            color: var(--accent-electric);
        }

        .dark-mode .review-link {
            background: var(--neutral-800);
            color: var(--neutral-100);
        }

        .dark-mode .review-link:hover {
            background: var(--neutral-700);
        }

        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 2.2em;
            }
            
            .podcast-grid, .review-grid {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 0 20px 40px;
            }

            .podcast-controls {
                flex-direction: column;
                gap: 8px;
            }

            .podcast-listen-btn, .podcast-download-btn {
                width: 100%;
                min-width: unset;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <button class="darkmode-toggle" id="darkmode-toggle" aria-label="Toggle dark mode">
                <span id="darkmode-icon">🌙</span>
            </button>
            <div class="header-text">
                <h1>MattGPT</h1>
                <p>Agentic AI Research Platform</p>
            </div>
        </div>

        <!-- Navigation -->
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('home', this)">
                🏠 Home
            </button>
            <button class="tab-button" onclick="switchTab('podcasts', this)">
                🎙️ Podcasts
            </button>
            <button class="tab-button" onclick="switchTab('reviews', this)">
                📊 Week in Review
            </button>
            <button class="tab-button" onclick="switchTab('download', this)">
                📥 Download
            </button>
            <button class="tab-button" onclick="switchTab('architecture', this)">
                🏗️ Architecture
            </button>
        </div>

        <!-- HOME TAB -->
        <div id="home" class="tab-content active">
            <div class="hero-section">
                <div class="hero-content">
                    <h1>Welcome to MattGPT</h1>
                    <p>Your intelligent research companion powered by IBM's Granite 3.2 LLM. Experience Two-Track Architecture combining chain operations for complex workflows with enhanced chat for conversational interactions, all running locally on your machine.</p>
                </div>
            </div>
            
            <div class="main-content">
                <div class="feature-container">
                    <h3>MattGPT: Local Agentic AI Research Platform</h3>
                    <div class="image-container" id="imageContainer">
                        <img src="aboutMattGPT.png" alt="About MattGPT" id="aboutImage">
                    </div>
                    <p style="color: var(--neutral-600); font-size: 0.9em;">Free and open-source research automation powered by local AI models</p>
                </div>

                <div class="section">
                    <h2>🎯 Two-Track Architecture</h2>
                    <div class="workflow-grid">
                        <div class="workflow-card">
                            <div class="workflow-title">🔗 Chain Operations Track</div>
                            <div class="workflow-description">
                                Button-driven complex workflows including "What's Going On?" analysis, Week in Review generation, and Daily Podcast creation with progress tracking.
                            </div>
                        </div>
                        
                        <div class="workflow-card">
                            <div class="workflow-title">💬 Enhanced Chat Track</div>
                            <div class="workflow-description">
                                Conversational interactions with article context, customer database queries, URL analysis, and PDF processing capabilities.
                            </div>
                        </div>
                        
                        <div class="workflow-card">
                            <div class="workflow-title">🧠 Local AI Intelligence</div>
                            <div class="workflow-description">
                                Powered by IBM's Granite 3.2:8b model running locally via Ollama, providing summarization, relevance scoring, and content analysis.
                            </div>
                        </div>
                        
                        <div class="workflow-card">
                            <div class="workflow-title">🎙️ AI-Generated Content</div>
                            <div class="workflow-description">
                                Edge-TTS voice synthesis creates daily podcasts with dual speaker personalities and intelligent script generation from trending articles.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>🔍 Core Workflows</h2>
                    <div class="workflow-grid">
                        <div class="workflow-card">
                            <div class="workflow-title">📰 Current Events Analysis</div>
                            <div class="workflow-description">
                                Multi-source RSS feed collection from tech/business sources with AI analysis, hot topics detection, and relevance boost scoring.
                            </div>
                        </div>
                        
                        <div class="workflow-card">
                            <div class="workflow-title">🌐 Enhanced Internet Search</div>
                            <div class="workflow-description">
                                Multi-provider search across DuckDuckGo, Google Custom Search, and Bing with intelligent fallbacks and content extraction.
                            </div>
                        </div>
                        
                        <div class="workflow-card">
                            <div class="workflow-title">📊 Advanced Analytics</div>
                            <div class="workflow-description">
                                Week-in-review trend consolidation with D3.js word clouds, keyword frequency analysis, and comprehensive summaries.
                            </div>
                        </div>
                        
                        <div class="workflow-card">
                            <div class="workflow-title">👥 Customer Management</div>
                            <div class="workflow-description">
                                CSV-based customer database with cluster organization, reference materials, and intelligent cache management for research insights.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PODCASTS TAB -->
        <div id="podcasts" class="tab-content">
            <div class="main-content">
                <div class="section">
                    <h2>🎙️ AI-Generated Daily Podcasts</h2>
                    <p style="color: var(--neutral-600); margin-bottom: 30px;">
                        Discover our AI-generated podcasts featuring Edge-TTS dual voice synthesis (Alex and Sam personas) discussing trending technology and business topics from current events analysis.
                    </p>
                    
                    <div id="podcastStatus" class="status-message status-info" style="display: none;">
                        <div class="loading-spinner"></div>
                        <span style="margin-left: 10px;">Loading podcasts...</span>
                    </div>
                    
                    <div id="podcastGrid" class="podcast-grid">
                        <!-- Podcasts will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- WEEK IN REVIEW TAB -->
        <div id="reviews" class="tab-content">
            <div class="main-content">
                <div class="section">
                    <h2>📊 Week in Review Analytics</h2>
                    <p style="color: var(--neutral-600); margin-bottom: 30px;">
                        Explore comprehensive weekly analyses with LLM-powered keyword consolidation, trend analysis, and interactive D3.js word cloud visualizations from 7 days of current events data.
                    </p>
                    
                    <div id="reviewStatus" class="status-message status-info" style="display: none;">
                        <div class="loading-spinner"></div>
                        <span style="margin-left: 10px;">Loading week reviews...</span>
                    </div>
                    
                    <div id="reviewGrid" class="review-grid">
                        <!-- Reviews will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- DOWNLOAD TAB -->
        <div id="download" class="tab-content">
            <div class="main-content">
                <div class="section">
                    <h2>📥 Download MattGPT</h2>
                    
                    <!-- Documentation Section -->
                    <div class="documentation-section">
                        <h4>📚 Documentation & Guides</h4>
                        <p style="color: var(--neutral-600); margin-bottom: 20px;">
                            Complete documentation to help you get started with MattGPT's features and customization options.
                        </p>
                        <div class="doc-buttons">
                            <a href="docs/user-guide.pdf" class="doc-button" download>
                                📖 User Guide
                            </a>
                            <a href="docs/installation-steps.pdf" class="doc-button" download>
                                🔧 Installation Steps
                            </a>
                            <a href="docs/customization-info.pdf" class="doc-button" download>
                                ⚙️ Customization Info
                            </a>
                            <a href="docs/project-schematic.pdf" class="doc-button" download>
                                🗺️ Project Schematic
                            </a>
                        </div>
                    </div>
                    
                    <div class="download-instructions">
                        <h4>🚀 Installation Instructions</h4>
                        <p style="margin-bottom: 15px; font-weight: 600; color: var(--accent-electric);">
                            ⚠️ Advanced Setup Required - This is a local AI research platform running entirely on your computer
                        </p>
                        <ol>
                            <li><strong>Prerequisites:</strong> Python 3.12+, modern web browser, 16GB+ RAM recommended</li>
                            <li><strong>Download Archive:</strong> Click the download button below to get the complete MattGPT source code</li>
                            <li><strong>Install Ollama:</strong> Visit ollama.ai and install for your operating system</li>
                            <li><strong>Download AI Model:</strong> Run <code>ollama pull granite3.2:8b</code> (IBM's Granite 3.2)</li>
                            <li><strong>Setup Python Environment:</strong> 
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li><code>python3.12 -m venv .venv</code></li>
                                    <li><code>source .venv/bin/activate</code> (Mac/Linux) or <code>.venv\Scripts\activate</code> (Windows)</li>
                                </ul>
                            </li>
                            <li><strong>Install Dependencies:</strong> <code>pip install -r requirements.txt</code></li>
                            <li><strong>Install Additional Tools:</strong> FFmpeg for audio processing, optional Edge-TTS for voice synthesis</li>
                            <li><strong>Configure Sources:</strong> Edit <code>sources_config.json</code> to customize RSS feeds and search providers</li>
                            <li><strong>Launch Application:</strong> Run <code>./MattGPT.sh</code> or <code>python app.py</code></li>
                            <li><strong>Access Interface:</strong> Open browser to <code>http://localhost:5000</code></li>
                        </ol>
                        
                        <h4>🔧 System Architecture</h4>
                        <ul style="margin-top: 15px; color: var(--neutral-700);">
                            <li><strong>Two-Track Design:</strong> Chain Operations + Enhanced Chat separation</li>
                            <li><strong>Local AI:</strong> IBM Granite 3.2:8b via Ollama (no cloud dependencies)</li>
                            <li><strong>Modular Components:</strong> Content Curator, Current Events Analyzer, Podcast Generator</li>
                            <li><strong>Data Storage:</strong> SQLite database with CSV-based customer management</li>
                            <li><strong>Optional Integrations:</strong> Google Custom Search, PDF processing, Edge-TTS</li>
                        </ul>
                        
                        <h4>🎯 Key Features</h4>
                        <ul style="margin-top: 15px; color: var(--neutral-700);">
                            <li><strong>Privacy-First:</strong> All processing happens locally on your machine</li>
                            <li><strong>Customizable:</strong> JSON configuration for sources, interests, and analysis parameters</li>
                            <li><strong>Multi-Format Output:</strong> Articles, podcasts, word clouds, and analytical reports</li>
                            <li><strong>Customer Insights:</strong> CSV-based customer database with research capabilities</li>
                        </ul>
                        
                        <a href="download/Archive.zip" class="archive-download" download>
                            📦 Download **NEW** MattGPT Archive (Complete Source Code)
                        </a>
                    </div>
                    
                    <div style="background: var(--primary-50); border-radius: var(--radius-md); padding: 20px; margin-top: 30px; border-left: 4px solid var(--accent-neon);">
                        <h4 style="color: var(--primary-700); margin-bottom: 10px;">💡 Development Philosophy</h4>
                        <p style="color: var(--neutral-700); margin: 0;">
                            MattGPT demonstrates that sophisticated AI research workflows can run entirely locally without cloud dependencies. Use AI assistants like Claude or ChatGPT to help troubleshoot and customize the system, but maintain full control over your data and processing.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ARCHITECTURE TAB -->
        <div id="architecture" class="tab-content">
            <div class="main-content">
                <div class="section">
                    <h2>🔧 Technical Architecture Overview</h2>
                    <p style="color: var(--neutral-600); margin-bottom: 30px;">
                        MattGPT implements a sophisticated Two-Track Architecture enabling both complex automated workflows and conversational interactions, all powered by local AI models.
                    </p>

                    <div class="workflow-grid">
                        <div class="workflow-card">
                            <div class="workflow-title">🏗️ Two-Track Architecture</div>
                            <div class="workflow-description">
                                Separate operational tracks: Chain Operations Manager for complex workflows, Enhanced Chat Manager for conversational interactions with proper separation of concerns.
                            </div>
                        </div>

                        <div class="workflow-card">
                            <div class="workflow-title">🤖 Local AI Integration</div>
                            <div class="workflow-description">
                                IBM Granite 3.2:8b model via Ollama for content analysis, summarization, relevance scoring, and conversational responses without cloud dependencies.
                            </div>
                        </div>

                        <div class="workflow-card">
                            <div class="workflow-title">🔄 Chain Operations</div>
                            <div class="workflow-description">
                                Direct orchestration of complex workflows including current events analysis, week review generation, and podcast creation with progress tracking.
                            </div>
                        </div>

                        <div class="workflow-card">
                            <div class="workflow-title">💬 Enhanced Chat System</div>
                            <div class="workflow-description">
                                Stateful conversational interface with session management, article context, customer database queries, and URL analysis capabilities.
                            </div>
                        </div>

                        <div class="workflow-card">
                            <div class="workflow-title">📊 Content Processing</div>
                            <div class="workflow-description">
                                Multi-source RSS collection, web scraping, PDF processing, and AI-powered content curation with relevance scoring and hot topics detection.
                            </div>
                        </div>

                        <div class="workflow-card">
                            <div class="workflow-title">🎙️ Audio Generation</div>
                            <div class="workflow-description">
                                Edge-TTS integration for high-quality voice synthesis with dual speaker personalities and intelligent dialogue script generation.
                            </div>
                        </div>
                    </div>

                    <div style="text-align: center; margin: 40px 0; padding: 30px; background: var(--gradient-surface); border-radius: var(--radius-lg); border: 2px solid var(--accent-electric);">
                        <div style="font-size: 3em; margin-bottom: 15px;">🏗️</div>
                        <h3 style="color: var(--primary-600); margin-bottom: 15px;">Deep Technical Documentation</h3>
                        <p style="color: var(--neutral-600); margin-bottom: 25px; max-width: 600px; margin-left: auto; margin-right: auto;">
                            Explore comprehensive technical documentation including system architecture diagrams, API endpoints, database schemas, and implementation details for every component.
                        </p>
                        <a href="architecture.html" class="cta-button" target="_blank">📖 View Full Architecture Documentation</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application State
        const AppState = {
            currentTab: 'home',
            loadedTabs: new Set(['home']),
            isDarkMode: localStorage.getItem('dark-mode') === 'true'
        };

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('MattGPT Homepage initialized - Two-Track Architecture');
            initializeDarkMode();
        });

        // Dark Mode Management
        function initializeDarkMode() {
            const darkToggle = document.getElementById('darkmode-toggle');
            const darkIcon = document.getElementById('darkmode-icon');
            
            // Set initial dark mode state
            setDarkMode(AppState.isDarkMode);
            
            darkToggle.addEventListener('click', () => {
                AppState.isDarkMode = !AppState.isDarkMode;
                setDarkMode(AppState.isDarkMode);
                localStorage.setItem('dark-mode', AppState.isDarkMode);
            });
        }

        function setDarkMode(isDark) {
            document.body.classList.toggle('dark-mode', isDark);
            const darkIcon = document.getElementById('darkmode-icon');
            if (darkIcon) {
                darkIcon.textContent = isDark ? '☀️' : '🌙';
            }
        }

        // Tab Management
        function switchTab(tabName, buttonElement) {
            // Update state
            AppState.currentTab = tabName;
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab content
            const targetTab = document.getElementById(tabName);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // Add active class to clicked button
            if (buttonElement) {
                buttonElement.classList.add('active');
            }
            
            // Load content for specific tabs if not already loaded
            if (!AppState.loadedTabs.has(tabName)) {
                loadTabContent(tabName);
                AppState.loadedTabs.add(tabName);
            }
        }

        // Content Loading
        function loadTabContent(tabName) {
            switch (tabName) {
                case 'podcasts':
                    loadPodcastsContent();
                    break;
                case 'reviews':
                    loadWeekReviewsContent();
                    break;
                default:
                    console.log(`No special loading required for tab: ${tabName}`);
            }
        }

        // FIXED Podcast Management
        async function loadPodcastsContent() {
            const grid = document.getElementById('podcastGrid');
            const status = document.getElementById('podcastStatus');
            
            // Show loading status
            showStatusMessage(status, 'info', 'Loading podcasts...');
            
            try {
                // Define available podcast files - CORRECTED PATHS
                const podcastFiles = ['podcast_20250727', 'podcast_20250728'];
                const podcasts = [];

                // Load metadata for each podcast
                for (const filename of podcastFiles) {
                    try {
                        console.log(`Attempting to load: podcast/${filename}.txt`);
                        const response = await fetch(`podcast/${filename}.txt`);
                        if (response.ok) {
                            const content = await response.text();
                            console.log(`Successfully loaded ${filename}.txt`);
                            const podcast = parsePodcastMetadata(content, filename);
                            podcasts.push(podcast);
                        } else {
                            console.log(`Failed to load ${filename}.txt - Status: ${response.status}`);
                        }
                    } catch (error) {
                        console.log(`Error loading ${filename}:`, error);
                    }
                }

                // Hide status message
                hideStatusMessage(status);

                if (podcasts.length === 0) {
                    console.log('No podcasts found, showing empty state');
                    grid.innerHTML = createEmptyState('🎙️', 'No podcasts available yet. Use the Daily Podcast button to generate AI-powered content!');
                    return;
                }

                console.log(`Loaded ${podcasts.length} podcasts`);
                // Create podcast list
                grid.innerHTML = createPodcastList(podcasts);

            } catch (error) {
                console.error('Error loading podcasts:', error);
                showStatusMessage(status, 'error', 'Failed to load podcasts. Please try again later.');
                grid.innerHTML = createDemoPodcastList();
            }
        }

        function parsePodcastMetadata(content, filename) {
            const lines = content.split('\n').map(line => line.trim());
            
            return {
                filename: filename,
                title: extractMetadataValue(lines, 'Title') || 'Daily Podcast',
                description: extractMetadataValue(lines, 'Description') || 'AI-generated podcast discussing current events',
                duration: extractMetadataValue(lines, 'Length') || '',
                date: extractMetadataValue(lines, 'Date') || ''
            };
        }

        function extractMetadataValue(lines, key) {
            const line = lines.find(line => line.startsWith(`${key}:`));
            if (line) {
                return line.replace(`${key}:`, '').replace(/^"|"$/g, '').trim();
            }
            return '';
        }

        function createPodcastList(podcasts) {
            return podcasts.map(podcast => `
                <div class="podcast-item">
                    <div class="item-title">
                        🎙️ ${escapeHtml(podcast.title)}
                    </div>
                    <div class="item-meta">
                        ${podcast.date} ${podcast.duration ? `• ${podcast.duration}` : ''}
                    </div>
                    <div class="item-description">
                        ${escapeHtml(podcast.description)}
                    </div>
                    <div class="podcast-controls">
                        <button onclick="togglePodcastPlayer('${podcast.filename}', this)" 
                                class="podcast-listen-btn" 
                                data-audio-file="${podcast.filename}.mp3">
                            🎧 Listen
                        </button>
                        <a href="podcast/${podcast.filename}.mp3" 
                           class="podcast-download-btn" 
                           download>
                            📥 Download
                        </a>
                    </div>
                    <div id="player-${sanitizeId(podcast.filename)}" 
                         class="podcast-player">
                        <audio controls preload="metadata">
                            <source src="podcast/${podcast.filename}.mp3" type="audio/mpeg">
                            Your browser does not support the audio element.
                        </audio>
                    </div>
                </div>
            `).join('');
        }

        function createDemoPodcastList() {
            return `
                <div style="background: var(--gradient-surface); border-radius: var(--radius-lg); padding: 30px;">
                    <h3 style="color: var(--primary-600); margin-bottom: 20px;">🎙️ AI-Generated Podcasts</h3>
                    <p style="color: var(--neutral-600); margin-bottom: 20px;">Generated podcasts will appear here after using the Daily Podcast feature. Each podcast features AI-generated dialogue between Alex and Sam discussing trending topics.</p>
                    <div style="text-align: center; padding: 20px; background: var(--neutral-50); border-radius: var(--radius-md); border: 2px dashed var(--neutral-300);">
                        <div style="font-size: 2em; margin-bottom: 10px;">🎙️</div>
                        <p style="color: var(--neutral-500); margin: 0;">Use the "Daily Podcast" button on the main interface to generate your first AI podcast!</p>
                    </div>
                </div>
            `;
        }

        // FIXED Podcast Player Management
        function togglePodcastPlayer(filename, button) {
            const playerId = 'player-' + sanitizeId(filename);
            const player = document.getElementById(playerId);

            if (!player) {
                console.error(`Player element with ID '${playerId}' not found`);
                return;
            }

            if (player.style.display === 'none' || player.style.display === '') {
                showAudioPlayer(player, button, filename);
            } else {
                hideAudioPlayer(player, button);
            }
        }

        function showAudioPlayer(player, button, filename) {
            player.style.display = 'block';
            button.innerHTML = '⏹️ Hide';
            button.style.background = 'var(--neutral-500)';

            const audio = player.querySelector('audio');
            if (audio) {
                // Set up error handling
                audio.onerror = function(e) {
                    console.error('Audio loading error:', e);
                    button.innerHTML = '❌ Error';
                    button.style.background = 'var(--accent-error)';
                };

                audio.onloadstart = function() {
                    button.innerHTML = '⏳ Loading...';
                    button.disabled = true;
                };

                audio.oncanplay = function() {
                    button.innerHTML = '⏹️ Hide';
                    button.disabled = false;
                    button.style.background = 'var(--neutral-500)';
                };

                // Attempt to load the audio
                audio.load();
                
                // Optional: Attempt to play (may be blocked by browser policy)
                audio.play().catch(e => {
                    console.log('Auto-play prevented by browser policy');
                });
            }
        }

        function hideAudioPlayer(player, button) {
            player.style.display = 'none';
            button.innerHTML = '🎧 Listen';
            button.style.background = 'var(--primary-600)';
            button.disabled = false;

            const audio = player.querySelector('audio');
            if (audio) {
                audio.pause();
                audio.currentTime = 0;
            }
        }

        // FIXED Week Reviews Management - Load Local Files
        async function loadWeekReviewsContent() {
            const grid = document.getElementById('reviewGrid');
            const status = document.getElementById('reviewStatus');
            
            // Show loading status
            showStatusMessage(status, 'info', 'Loading week reviews...');

            try {
                // Define the local week review files
                const reviewFiles = [
                    { filename: 'week_review_2025-07-28.json', expectedTitle: 'Week Review July 28, 2025' },
                    { filename: 'week_review_2025-07-27.json', expectedTitle: 'Week Review July 27, 2025' }
                ];
                
                const availableReviews = [];

                // Check which files are actually available
                for (const reviewFile of reviewFiles) {
                    try {
                        console.log(`Checking for: wir/${reviewFile.filename}`);
                        const response = await fetch(`wir/${reviewFile.filename}`);
                        if (response.ok) {
                            const data = await response.json();
                            console.log(`Successfully found ${reviewFile.filename}`);
                            
                            // Extract meaningful information from the JSON
                            let title = reviewFile.expectedTitle;
                            let date = reviewFile.filename.replace('week_review_', '').replace('.json', '');
                            let topicsCount = 0;
                            
                            // Try to extract more specific info from the data structure
                            if (data.analysis && data.analysis.keywords) {
                                topicsCount = data.analysis.keywords.length;
                            } else if (data.keyword_counts) {
                                topicsCount = Object.keys(data.keyword_counts).length;
                            }
                            
                            if (data.generated_date) {
                                const genDate = new Date(data.generated_date);
                                date = genDate.toLocaleDateString('en-US', {
                                    year: 'numeric',
                                    month: 'long',
                                    day: 'numeric'
                                });
                            }
                            
                            availableReviews.push({
                                filename: reviewFile.filename,
                                title: title,
                                date: date,
                                topicsCount: topicsCount
                            });
                        } else {
                            console.log(`File not found: ${reviewFile.filename}`);
                        }
                    } catch (error) {
                        console.log(`Error checking ${reviewFile.filename}:`, error);
                    }
                }

                // Hide status message
                hideStatusMessage(status);

                if (availableReviews.length === 0) {
                    console.log('No week reviews found, showing empty state');
                    grid.innerHTML = createEmptyState('📊', 'No week reviews available yet. Use the "Week in Review" button to generate comprehensive weekly analysis!');
                    return;
                }

                console.log(`Found ${availableReviews.length} week reviews`);
                // Create reviews list
                grid.innerHTML = createWeekReviewList(availableReviews);

            } catch (error) {
                console.error('Error loading week reviews:', error);
                hideStatusMessage(status);
                grid.innerHTML = createDemoWeekReviewList();
            }
        }

        function createWeekReviewList(reviews) {
            return `
                <div style="background: var(--gradient-surface); border-radius: var(--radius-lg); padding: 30px;">
                    <h3 style="color: var(--primary-600); margin-bottom: 20px;">📋 Available Week Reviews</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        ${reviews.map(review => `
                            <li style="margin-bottom: 15px;">
                                <a href="javascript:void(0)" onclick="openWeekReview('${escapeHtml(review.filename)}')" 
                                   class="review-link">
                                    <span style="font-size: 1.5em;">📊</span>
                                    <div>
                                        <div style="font-weight: 600; color: var(--primary-600);">${escapeHtml(review.title)}</div>
                                        <div style="font-size: 0.9em; color: var(--neutral-500); margin-top: 3px;">${escapeHtml(review.date)} • ${review.topicsCount} topics analyzed</div>
                                    </div>
                                </a>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
        }

        function createDemoWeekReviewList() {
            return `
                <div style="background: var(--gradient-surface); border-radius: var(--radius-lg); padding: 30px;">
                    <h3 style="color: var(--primary-600); margin-bottom: 20px;">📋 Week in Review Analytics</h3>
                    <p style="color: var(--neutral-600); margin-bottom: 20px;">Generated weekly analyses with keyword consolidation, trend analysis, and D3.js word clouds will appear here after using the Week in Review feature.</p>
                    <div style="text-align: center; padding: 20px; background: var(--neutral-50); border-radius: var(--radius-md); border: 2px dashed var(--neutral-300);">
                        <div style="font-size: 2em; margin-bottom: 10px;">📊</div>
                        <p style="color: var(--neutral-500); margin: 0;">Use the "Week in Review" button to generate comprehensive weekly analysis reports!</p>
                    </div>
                </div>
            `;
        }

        function openWeekReview(filename) {
            const url = `week_review_display.html?file=${encodeURIComponent(filename)}`;
            window.open(url, '_blank');
        }

        // Utility Functions
        function showStatusMessage(element, type, message) {
            if (!element) return;
            
            element.className = `status-message status-${type}`;
            element.innerHTML = type === 'info' ? 
                `<div class="loading-spinner"></div><span style="margin-left: 10px;">${message}</span>` :
                message;
            element.style.display = 'block';
        }

        function hideStatusMessage(element) {
            if (element) {
                element.style.display = 'none';
            }
        }

        function createEmptyState(icon, message) {
            return `
                <div class="empty-state">
                    <div class="empty-state-icon">${icon}</div>
                    <p>${message}</p>
                </div>
            `;
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function sanitizeId(str) {
            return str.replace(/[^a-zA-Z0-9]/g, '');
        }
    </script>
</body>
</html>