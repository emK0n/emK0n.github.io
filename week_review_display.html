<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week in Review Modal</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.7/d3.layout.cloud.min.js"></script>
</head>
<body>
    <!-- Modal Article Viewer -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-container" id="modalContainer">
            <div class="modal-header" id="modalHeader">
                <span>üìä Week in Review: June 21-27, 2025</span>
                <button class="modal-close" id="modalClose" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-filters">
                <div class="filter-section">
                    <label>Filter:</label>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all" onclick="setArticleFilter('all')">All Articles</button>
                        <button class="filter-btn" data-filter="boosted" onclick="setArticleFilter('boosted')">Boosted Only</button>
                    </div>
                </div>
                <div class="sort-section">
                    <label>Sort by:</label>
                    <div class="sort-buttons">
                        <button class="sort-btn active" data-sort="score" onclick="setArticleSort('score')">Highest Score</button>
                        <button class="sort-btn" data-sort="recent" onclick="setArticleSort('recent')">Most Recent</button>
                    </div>
                </div>
            </div>
            <div class="modal-content">
                <div class="modal-articles-list" id="modalArticlesList">
                    <div class="week-review-modal-content" id="weekReviewPrintContent">
                        <div class="week-review-header">
                            <h1>üìä Week in Review Analysis</h1>
                            <h2>June 21-27, 2025</h2>
                            <div class="week-review-stats">
                                <div class="stat-item">
                                    <span class="stat-number">7</span>
                                    <span class="stat-label">Days Analyzed</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">47</span>
                                    <span class="stat-label">Keywords Found</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">23</span>
                                    <span class="stat-label">Trends Found</span>
                                </div>
                            </div>
                        </div>

                        <div class="week-review-section">
                            <h3>üìù Weekly Summary</h3>
                            <div class="summary-content">
                                <p class="topic-header"><strong>AI and Machine Learning Developments</strong></p>
                                <p>This week saw significant advancements in artificial intelligence, with major breakthroughs in large language models and computer vision applications. Several tech companies announced new AI initiatives focused on enterprise solutions.</p>
                                
                                <p class="topic-header"><strong>Technology Industry Updates</strong></p>
                                <p>The technology sector experienced notable movements with startup funding rounds and merger announcements. Cloud computing services continued to show strong growth patterns across multiple market segments.</p>
                                
                                <p class="topic-header"><strong>Research and Innovation</strong></p>
                                <p>Academic institutions published groundbreaking research in quantum computing and sustainable technology solutions. Open-source projects gained momentum with increased community contributions and enterprise adoption.</p>
                            </div>
                        </div>

                        <div class="word-clouds-section">
                            <div class="word-cloud-container">
                                <h3>üîç Top Keywords</h3>
                                <div class="word-cloud-modal" id="keywordCloudModal"></div>
                                <div class="word-cloud-stats-modal">
                                    <strong>47</strong> unique keywords ‚Ä¢
                                    <strong>312</strong> total mentions
                                </div>
                            </div>

                            <div class="word-cloud-container">
                                <h3>üìà Trending Topics</h3>
                                <div class="word-cloud-modal" id="trendCloudModal"></div>
                                <div class="word-cloud-stats-modal">
                                    <strong>23</strong> unique trends ‚Ä¢
                                    <strong>156</strong> total mentions
                                </div>
                            </div>
                        </div>

                        <div class="data-tables-section">
                            <div class="data-table">
                                <h3>üîç Keyword Frequency</h3>
                                <table class="frequency-table">
                                    <thead>
                                        <tr><th>Keyword</th><th>Mentions</th></tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>artificial intelligence</td><td>45</td></tr>
                                        <tr><td>machine learning</td><td>38</td></tr>
                                        <tr><td>cloud computing</td><td>32</td></tr>
                                        <tr><td>startup funding</td><td>28</td></tr>
                                        <tr><td>quantum computing</td><td>24</td></tr>
                                        <tr><td>cybersecurity</td><td>22</td></tr>
                                        <tr><td>blockchain</td><td>19</td></tr>
                                        <tr><td>data privacy</td><td>17</td></tr>
                                        <tr><td>automation</td><td>15</td></tr>
                                        <tr><td>sustainable tech</td><td>13</td></tr>
                                        <tr><td>IoT</td><td>12</td></tr>
                                        <tr><td>API</td><td>11</td></tr>
                                        <tr><td>microservices</td><td>10</td></tr>
                                        <tr><td>devops</td><td>9</td></tr>
                                        <tr><td>containers</td><td>8</td></tr>
                                        <tr><td>kubernetes</td><td>7</td></tr>
                                        <tr><td>serverless</td><td>6</td></tr>
                                        <tr><td>neural networks</td><td>5</td></tr>
                                        <tr><td>deep learning</td><td>4</td></tr>
                                        <tr><td>computer vision</td><td>3</td></tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="data-table">
                                <h3>üìà Trending Topics</h3>
                                <table class="frequency-table">
                                    <thead>
                                        <tr><th>Topic</th><th>Mentions</th></tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>AI regulation</td><td>31</td></tr>
                                        <tr><td>tech IPOs</td><td>27</td></tr>
                                        <tr><td>remote work tools</td><td>23</td></tr>
                                        <tr><td>green technology</td><td>20</td></tr>
                                        <tr><td>5G networks</td><td>18</td></tr>
                                        <tr><td>digital transformation</td><td>16</td></tr>
                                        <tr><td>edge computing</td><td>14</td></tr>
                                        <tr><td>fintech innovation</td><td>12</td></tr>
                                        <tr><td>IoT devices</td><td>10</td></tr>
                                        <tr><td>AR/VR technology</td><td>8</td></tr>
                                        <tr><td>crypto markets</td><td>7</td></tr>
                                        <tr><td>space tech</td><td>6</td></tr>
                                        <tr><td>biotech advances</td><td>5</td></tr>
                                        <tr><td>robotics</td><td>4</td></tr>
                                        <tr><td>autonomous vehicles</td><td>3</td></tr>
                                        <tr><td>smart cities</td><td>2</td></tr>
                                        <tr><td>wearable tech</td><td>2</td></tr>
                                        <tr><td>voice assistants</td><td>1</td></tr>
                                        <tr><td>facial recognition</td><td>1</td></tr>
                                        <tr><td>drone technology</td><td>1</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data for demonstration
        const sampleKeywordData = {
            'artificial intelligence': 45,
            'machine learning': 38,
            'cloud computing': 32,
            'startup funding': 28,
            'quantum computing': 24,
            'cybersecurity': 22,
            'blockchain': 19,
            'data privacy': 17,
            'automation': 15,
            'sustainable tech': 13,
            'IoT': 12,
            'API': 11,
            'microservices': 10,
            'devops': 9,
            'containers': 8,
            'kubernetes': 7,
            'serverless': 6,
            'neural networks': 5,
            'deep learning': 4,
            'computer vision': 3
        };

        const sampleTrendData = {
            'AI regulation': 31,
            'tech IPOs': 27,
            'remote work tools': 23,
            'green technology': 20,
            '5G networks': 18,
            'digital transformation': 16,
            'edge computing': 14,
            'fintech innovation': 12,
            'IoT devices': 10,
            'AR/VR technology': 8,
            'crypto markets': 7,
            'space tech': 6,
            'biotech advances': 5,
            'robotics': 4,
            'autonomous vehicles': 3,
            'smart cities': 2,
            'wearable tech': 2,
            'voice assistants': 1,
            'facial recognition': 1,
            'drone technology': 1
        };

        // Show modal immediately on page load
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('modalOverlay');
            modal.classList.add('show');
            
            // Hide filters section since this is week review
            const filters = document.querySelector('.modal-filters');
            if (filters) {
                filters.style.display = 'none';
            }
            
            // Generate word clouds after modal is shown
            setTimeout(() => {
                generateWordCloudInModal('keywordCloudModal', sampleKeywordData, 'keywords');
                generateWordCloudInModal('trendCloudModal', sampleTrendData, 'trends');
            }, 300);
        });

        function closeModal() {
            const modal = document.getElementById('modalOverlay');
            modal.classList.remove('show');
        }

        function setArticleFilter(filter) {
            // Placeholder function for filter buttons
        }

        function setArticleSort(sort) {
            // Placeholder function for sort buttons
        }

        function generateWordCloudInModal(containerId, wordData, type) {
            const container = document.getElementById(containerId);

            if (!wordData || Object.keys(wordData).length === 0) {
                container.innerHTML = `<div style="padding: 40px; text-align: center; color: #6b7280;">No ${type} data available</div>`;
                return;
            }

            // Clear existing content
            container.innerHTML = '';

            // Prepare data for D3 cloud
            const words = Object.entries(wordData).slice(0, 50).map(([text, size]) => ({
                text: text,
                size: Math.max(12, Math.min(40, size * 6))
            }));

            // Set up dimensions for modal
            const width = 450;
            const height = 250;

            // Color scale
            const colorScale = d3.scaleOrdinal(
                type === 'keywords'
                    ? ['#667eea', '#764ba2', '#4facfe', '#00f2fe', '#667eea']
                    : ['#f093fb', '#f5576c', '#ff6b6b', '#4ecdc4', '#45b7d1']
            );

            // Create SVG
            const svg = d3.select(container)
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const g = svg.append('g')
                .attr('transform', `translate(${width/2},${height/2})`);

            // Create word cloud layout
            const layout = d3.layout.cloud()
                .size([width, height])
                .words(words)
                .padding(3)
                .rotate(() => ~~(Math.random() * 2) * 90)
                .font('Impact')
                .fontSize(d => d.size)
                .on('end', draw);

            layout.start();

            function draw(words) {
                g.selectAll('text')
                    .data(words)
                    .enter().append('text')
                    .style('font-size', d => d.size + 'px')
                    .style('font-family', 'Impact')
                    .style('fill', (d, i) => colorScale(i))
                    .style('cursor', 'pointer')
                    .attr('text-anchor', 'middle')
                    .attr('transform', d => `translate(${d.x},${d.y})rotate(${d.rotate})`)
                    .text(d => d.text)
                    .on('mouseover', function(event, d) {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .style('opacity', 0.7);
                    })
                    .on('mouseout', function(event, d) {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .style('opacity', 1);
                    });
            }
        }
    </script>
</body>
</html>